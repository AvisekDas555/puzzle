<!DOCTYPE html>
<html lang="en">

	<head>

		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />

		<title>Puzzle</title>

		<link rel="stylesheet" type="text/css" href="puzzle.css" />
		<link rel="stylesheet" type="text/css" href="style.css" />

		<script type="text/javascript">
// Error Tracking
window.onerror = function(errorMsg, url, lineNumber) {
	alert("JavaScript Error!\n\nMassage: " + errorMsg + "\nURL: " + url + "\nLine: " + lineNumber + "\n");
};
		</script>

	</head>

	<body>

		<header class="container">

			<h1>Puzzle</h1>

			<p>Written in JavaScript and dependency free.</p>

		</header>

		<main class="container">

			<section>
				<div class="demo demo-1">
					<div class="puzzle" id="puzzle-1"></div>
					<div class="alert alert-info" id="info" role="alert" style="display: none;">Try touching & dragging the blank slide to get better experience.</div>
					<div class="row">
						<div class="col">
							<button type="button" class="btn btn-primary btn-block" id="puzzle-1-randomize">Randomize</button>
						</div>
						<div class="col">
							<button type="button" class="btn btn-primary btn-block" id="puzzle-1-show-hint">Show Hint</button>
						</div>
					</div>
				</div>
			</section>

			<section>
				<h3>Getting Started</h3>
				<p>Just include the needed CSS and JavaScript files, and you are ready to go!</p>
				<pre>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;puzzle.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;puzzle.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
	var container = document.getElementById(&quot;puzzle&quot;);
	var myPuzzle = new Puzzle(container, &quot;puzzle.jpg&quot;, 4);
&lt;/script&gt;</pre>
			</section>

			<section>
				<h3>Configuration</h3>
				<h4>The Syntex</h4>
				<pre>var myPuzzle = new Puzzle(<i>place</i>, <i>imageURL</i>[, <i>root</i>, <i>blankSlideIndex</i>]);</pre>
				<dl>
					<dt><code><strong>place</strong>: HTMLElement | function(element: HTMLElement)</code></dt>
					<dd>
						<p>The place where you want to append the container of Puzzle.</p>
						<p>In cases where you don't want to append the Puzzle container to an element, and need more control over the way it is inserted, the first argument to the <code>Puzzle</code> function can also be a function that, when given a DOM element, inserts it into the document somewhere. This could be used to, for example, replace an image with a real Puzzle:</p>
						<pre>var myPuzzle = new Puzzle(function(elt) {
	myImg.parentNode.replaceChild(elt, myImg);
}, myImg.src);</pre>
					</dd>
					<dt><code><strong>imageURL</strong>: string</code></dt>
					<dd>
						<p>The working URL of the image which will be used in Puzzle.</p>
					</dd>
					<dt><code><strong>root</strong>: integer</code> <small>(optional)</small></dt>
					<dd>
						<p>Default value: 4</p>
						<p>The number of columns and/or rows in Puzzle.</p>
					</dd>
					<dt><code><strong>blankSlideIndex</strong>: integer</code> <small>(optional)</small></dt>
					<dd>
						<p>Default value: <i>random</i></p>
						<p>The index of blank slide.</p>
					</dd>
				</dl>
			</section>

			<section>
				<h3>Methods</h3>
				<dl>
					<dt><code><strong>turnLeft</strong>()</code><span class="keybinding"><kbd>ArrowLeft</kbd></span></dt>
					<dt><code><strong>turnUp</strong>()</code><span class="keybinding"><kbd>ArrowUp</kbd></span></dt>
					<dt><code><strong>turnRight</strong>()</code><span class="keybinding"><kbd>ArrowRight</kbd></span></dt>
					<dt><code><strong>turnDown</strong>()</code><span class="keybinding"><kbd>ArrowDown</kbd></span></dt>
					<dd>
						<p>Takes turn.</p>
					</dd>
					<dt><code><strong>randomize</strong>(?steps: integer)</code><span class="keybinding"><kbd>R</kbd></span></dt>
					<dd>
						<p>Randomizes the slides of the Puzzle.</p>
					</dd>
					<dt><code><strong>solve</strong>()</code></dt>
					<dd>
						<p>Sorts the slides and builds the image of the Puzzle instantly.</p>
					</dd>
					<dt><code><strong>getTurnPosibilities</strong>() &rarr; { left: boolean, up: boolean, right: boolean, down: boolean }</code></dt>
					<dd>
						<p>Returns the possible directions in which can be turned.</p>
					</dd>
					<dt><code><strong>addEventListener</strong>(type: string, handler: function(event: EventObject))</code></dt>
					<dt><code><strong>removeEventListener</strong>(type: string, handler: function(event: EventObject))</code></dt>
					<dd>
						<p>Adds/removes event listeners on main container element of Puzzle.</p>
					</dd>
				</dl>
				<div class="demo demo-2">
					<div class="puzzle" id="puzzle-2"></div>
					<div class="btn-toolbar" role="toolbar">
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-turnLeft">turnLeft()</button>
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-turnUp">turnUp()</button>
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-turnRight">turnRight()</button>
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-turnDown">turnDown()</button>
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-randomize">randomize()</button>
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-solve">solve()</button>
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-getTurnPosibilities">getTurnPosibilities()</button>
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-addEventListener">addEventListener()</button>
						<button type="button" class="btn btn-primary" id="puzzle-2-methods-removeEventListener">removeEventListener()</button>
					</div>
					<div class="console">
						<div class="console-rows" id="console-rows">
							<div class="console-row">
								<pre class="console-input">puzzle2 = new Puzzle($(&#x22;puzzle-2&#x22;), &#x22;puzzle-2.jpg&#x22;, 4);</pre>
								<pre class="console-output">{...}</pre>
							</div>
						</div>
						<div class="console-prompt">
							<textarea id="console-textarea" rows="1"></textarea>
						</div>
					</div>
				</div>
			</section>

			<section>
				<h3>Events</h3>
				<dl>
					<dt><code><strong>&quot;turn&quot;</strong> (instance: Puzzle, direction: string)</code></dt>
					<dd>
						<p>Fires every time a slide is moved. The <code>direction</code> is a <code>(&quot;left&quot; | &quot;up&quot; | &quot;right&quot; | &quot;down&quot;)</code> string that describes the direction of movement of the Puzzle&apos;s blank slide.</p>
					</dd>
					<dt><code><strong>&quot;beforeturn&quot;</strong> (instance: Puzzle, direction: string)</code></dt>
					<dd>
						<p>This event is fired before a turn is taken, and its handler may choose to modify or cancel the turn. Like the normal events, this event can be cancelled by <code>event.preventDefault();</code>.</p>
					</dd>
					<dt><code><strong>&quot;solve&quot;</strong> (instance: Puzzle)</code></dt>
					<dd>
						<p>Fires after the whole puzzle is solved.</p>
					</dd>
					<dt><code><strong>&quot;randomize&quot;</strong> (instance: Puzzle, steps: integer)</code></dt>
					<dd>
						<p>This event is fired after the slides of the Puzzle is randomized by <code>Puzzle.randomize();</code>. The <code>steps</code> is an integer that describes the number of random turns.</p>
					</dd>
					<dt><code><strong>&quot;beforerandomize&quot;</strong> (instance: Puzzle, steps: integer)</code></dt>
					<dd>
						<p>This event is fired before the Puzzle is being randomized, and its handler may choose to modify the number of random steps and may cancel the whole action.</p>
					</dd>
					<dt><code><strong>&quot;showhint&quot;</strong> (instance: Puzzle)</code></dt>
					<dt><code><strong>&quot;hidehint&quot;</strong> (instance: Puzzle)</code></dt>
					<dd>
						<p>Fires before hint is shown/hidden. These two events are also cancellable.</p>
					</dd>
				</dl>
				<div class="demo demo-3">
					<div class="puzzle" id="puzzle-3"></div>
					<div class="btn-toolbar" role="toolbar">
						<button type="button" class="btn btn-primary" id="puzzle-3-randomize">Randomize</button>
						<button type="button" class="btn btn-primary" id="puzzle-3-show-hint">Show Hint</button>
						<button type="button" class="btn btn-primary" id="puzzle-3-let-me-solve">Let me solve</button>
					</div>
					<pre class="events-log" id="events-log"></pre>
				</div>
			</section>

			<section>
				<h3>Browser Support</h3>
				<ul>
					<li>Chrome 45+</li>
					<li>Firefox 38+</li>
					<li>Edge 12+</li>
					<li>Internet Explorer 10+</li>
					<li>Safari 9+</li>
					<li>Android 4.4+</li>
					<li>iOS</li>
				</ul>
			</section>

			<section>
				<h3>Fork me on Github</h3>
				<p>Goto <a href="https://github.com/AvisekDas555/puzzle">repository page</a>.</p>
			</section>

			<section>
				<h3>License</h3>
				<p>MIT</p>
			</section>

			<section>
				<h3>Bugs?</h3>
				<p><a href="https://github.com/AvisekDas555/puzzle/issues">File them</a></p>
			</section>

		</main>

		<footer>

			<div class="container">
				<a class="btn btn-success btn-sm float-right" href="https://github.com/AvisekDas555/puzzle/archive/master.zip">Download ZIP</a>
				<p class="text-muted">Made with <span class="love"></span> by <a href="https://github.com/AvisekDas555">Avi</a></p>
			</div>

		</footer>

		<script type="text/javascript" src="puzzle.js"></script>

		<script type="text/javascript">

var $ = function(id) {
	return document.getElementById(id);
};


// demo

var puzzle1 = new Puzzle($("puzzle-1"), "puzzle-1.jpg", 4);

$("puzzle-1-randomize").addEventListener("click", function() {
	puzzle1.randomize();
});

$("puzzle-1-show-hint").addEventListener("mousedown", function(e) {
	puzzle1.showHint();
});
$("puzzle-1-show-hint").addEventListener("touchstart", function(e) {
	puzzle1.showHint();
});

$("puzzle-1-show-hint").addEventListener("mouseup", function(e) {
	puzzle1.hideHint();
});
$("puzzle-1-show-hint").addEventListener("touchend", function(e) {
	puzzle1.hideHint();
});

var t = 10;
puzzle1.addEventListener("turn", function(e) {
	if (--t == 0) {
		$("info").style.display = "";
		setTimeout(function() {
			$("info").style.display = "none";
		}, 10000);
	}
});


// demo-2

var puzzle2 = new Puzzle($("puzzle-2"), "puzzle-2.jpg", 4);

var consoleRows = $("console-rows");
var consoleInput = $("console-textarea");

var consoleEvaluate = function(code) {
	var row = document.createElement("div");
	row.className = "console-row";
	var input = document.createElement("pre");
	input.className = "console-input";
	input.innerHTML = code;
	row.appendChild(input);
	var ret
	try {
		ret = eval(code);
	} catch (err) {
		ret = err;
		row.className += " " + "text-danger";
	}
	if (ret !== undefined) {
		var output = document.createElement("pre");
		output.className = "console-output";
		output.innerHTML = ret;
		row.appendChild(output);
	}
	consoleRows.appendChild(row);
	consoleRows.scrollTop = consoleRows.scrollHeight - consoleRows.clientHeight;
};

consoleInput.addEventListener("keydown", function(e) {
	var code = consoleInput.value.trim();
	if (e.keyCode == 13) {
		if (code.length) {
			consoleEvaluate(code);
		}
		consoleInput.value = "";
		e.preventDefault();
	}
});

$("puzzle-2-methods-turnLeft").addEventListener("click", function() {
	consoleEvaluate("puzzle2.turnLeft();");
});

$("puzzle-2-methods-turnUp").addEventListener("click", function() {
	consoleEvaluate("puzzle2.turnUp();");
});

$("puzzle-2-methods-turnRight").addEventListener("click", function() {
	consoleEvaluate("puzzle2.turnRight();");
});

$("puzzle-2-methods-turnDown").addEventListener("click", function() {
	consoleEvaluate("puzzle2.turnDown();");
});

$("puzzle-2-methods-randomize").addEventListener("click", function() {
	consoleEvaluate("puzzle2.randomize();");
});

$("puzzle-2-methods-solve").addEventListener("click", function() {
	consoleEvaluate("puzzle2.solve();");
});


// demo-3

var puzzle3 = new Puzzle($("puzzle-3"), "puzzle-3.jpg", 5);
var eventsLog = $("events-log");

var events = ["turn", "beforeturn", "solve", "randomize", "beforerandomize", "showhint", "hidehint"];

for (var i = 0; i < events.length; i++) {
	puzzle3.addEventListener(events[i], function(e) {
		eventsLog.innerHTML += e.type + "\n";
		eventsLog.scrollTop = eventsLog.scrollHeight - eventsLog.clientHeight;
	});
}

$("puzzle-3-randomize").addEventListener("click", function() {
	puzzle3.randomize();
});

$("puzzle-3-show-hint").addEventListener("mousedown", function(e) {
	puzzle3.showHint();
});
$("puzzle-3-show-hint").addEventListener("touchstart", function(e) {
	puzzle3.showHint();
});

$("puzzle-3-show-hint").addEventListener("mouseup", function(e) {
	puzzle3.hideHint();
});
$("puzzle-3-show-hint").addEventListener("touchend", function(e) {
	puzzle3.hideHint();
});

$("puzzle-3-let-me-solve").addEventListener("click", function() {
	if (puzzle3.hintShown) return;
	for (var i = 0; i < puzzle3.orderedSlides.length; i++) {
		puzzle3.slides[i] = puzzle3.orderedSlides[i];
	}
	puzzle3.updateSlides();
	puzzle3.randomize(1);
});

		</script>

	</body>

</html>
